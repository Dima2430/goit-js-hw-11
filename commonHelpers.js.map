{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Описаний у документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nloader.style.display = 'none';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet lightbox;\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  loader.style.display = 'block';\n    const queryInput = e.target.elements.query.value.trim();\n    if (queryInput.length < 3) {\n         iziToast.warning({\n      title: 'Warning',\n      message: 'Please enter a search query with at least 3 characters.',\n      position: 'topRight',\n         });\n       loader.style.display = 'none';\n    return;\n  }\n \n    gallery.innerHTML = '';\n  \n    getImage(queryInput).then(({ hits }) => {\n        if (hits.length > 0) {\n            const galleryHTML = hits.map(createGallery).join('');\n            gallery.innerHTML = galleryHTML;\n            \n            lightbox = new SimpleLightbox(`.gallery-link`);\n          lightbox.refresh();\n          loader.style.display = 'none';\n           \n        }else {\n            iziToast.info({\n                title: 'Info',\n                message: 'Unfortunately, no images were found for your search. Please try again!',\n                position: 'topRight',\n            });\n        }\n    })\n  form.reset();\n  \n})\n\nfunction getImage(q) {\n    const PARAMS = {\n        key: '42392659-652aaf55959599f1a779f61b5',\n        q,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safeSearch: true,\n    }\n    const url = BASE_URL + '?' + new URLSearchParams(PARAMS).toString();\n    return fetch(url).then(res => {\n            if (!res.ok) {\n                throw new Error('Network response was not ok');\n            }\n            return res.json();\n        })\n        .catch(error => {\n            iziToast.error({\n                title: 'Error',\n                message: 'There seems to be a problem with your internet connection. Please check and try again.',\n                position: 'topRight',\n            });\n            throw error;\n        })\n      .finally(() => {\n     loader.style.display = 'none';\n  })\n}\n\nfunction createGallery({\n  largeImageURL,\n  tags,\n  webformatURL,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  return `\n    <a href=\"${largeImageURL}\" class=\"gallery-link\">\n      <figure>\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\">\n        <figcaption class=\"gallery__figcaption\">\n          <div class=\"image-item\">Likes <span class=\"image-elem\">${likes}</span></div>\n          <div class=\"image-item\">Views <span class=\"image-elem\">${views}</span></div>\n          <div class=\"image-item\">Comments <span class=\"image-elem\">${comments}</span></div>\n          <div class=\"image-item\">Downloads <span class=\"image-elem\">${downloads}</span></div>\n        </figcaption>\n      </figure>\n    </a>\n  `;\n}"],"names":["form","gallery","loader","BASE_URL","lightbox","e","queryInput","iziToast","getImage","hits","galleryHTML","createGallery","SimpleLightbox","q","PARAMS","url","res","error","largeImageURL","tags","webformatURL","likes","views","comments","downloads"],"mappings":"6vBAWA,MAAMA,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EAC/CA,EAAO,MAAM,QAAU,OACvB,MAAMC,EAAW,2BACjB,IAAIC,EACJJ,EAAK,iBAAiB,SAAUK,GAAK,CACnCA,EAAE,eAAc,EAChBH,EAAO,MAAM,QAAU,QACrB,MAAMI,EAAaD,EAAE,OAAO,SAAS,MAAM,MAAM,OACjD,GAAIC,EAAW,OAAS,EAAG,CACtBC,EAAS,QAAQ,CACpB,MAAO,UACP,QAAS,0DACT,SAAU,UAChB,CAAU,EACHL,EAAO,MAAM,QAAU,OAC1B,MACD,CAECD,EAAQ,UAAY,GAEpBO,EAASF,CAAU,EAAE,KAAK,CAAC,CAAE,KAAAG,CAAI,IAAO,CACpC,GAAIA,EAAK,OAAS,EAAG,CACjB,MAAMC,EAAcD,EAAK,IAAIE,CAAa,EAAE,KAAK,EAAE,EACnDV,EAAQ,UAAYS,EAEpBN,EAAW,IAAIQ,EAAe,eAAe,EAC/CR,EAAS,QAAO,EAChBF,EAAO,MAAM,QAAU,MAEjC,MACYK,EAAS,KAAK,CACV,MAAO,OACP,QAAS,yEACT,SAAU,UAC1B,CAAa,CAEb,CAAK,EACHP,EAAK,MAAK,CAEZ,CAAC,EAED,SAASQ,EAASK,EAAG,CACjB,MAAMC,EAAS,CACX,IAAK,qCACL,EAAAD,EACA,WAAY,QACZ,YAAa,aACb,WAAY,EACf,EACKE,EAAMZ,EAAW,IAAM,IAAI,gBAAgBW,CAAM,EAAE,WACzD,OAAO,MAAMC,CAAG,EAAE,KAAKC,GAAO,CACtB,GAAI,CAACA,EAAI,GACL,MAAM,IAAI,MAAM,6BAA6B,EAEjD,OAAOA,EAAI,MACvB,CAAS,EACA,MAAMC,GAAS,CACZ,MAAAV,EAAS,MAAM,CACX,MAAO,QACP,QAAS,yFACT,SAAU,UAC1B,CAAa,EACKU,CAClB,CAAS,EACF,QAAQ,IAAM,CAChBf,EAAO,MAAM,QAAU,MAC5B,CAAG,CACH,CAEA,SAASS,EAAc,CACrB,cAAAO,EACA,KAAAC,EACA,aAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACF,EAAG,CACD,MAAO;AAAA,eACMN,CAAa;AAAA;AAAA,oBAERE,CAAY,UAAUD,CAAI;AAAA;AAAA,mEAEqBE,CAAK;AAAA,mEACLC,CAAK;AAAA,sEACFC,CAAQ;AAAA,uEACPC,CAAS;AAAA;AAAA;AAAA;AAAA,GAKhF"}